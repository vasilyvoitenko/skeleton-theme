{% schema %}
{
  "name": "Routines grid",
  "tag": "section",
  "settings": [
    {"type": "text", "id": "title", "label": "Heading", "default": "Find your routine"}
  ]
}
{% endschema %}

<section class="py-24">
  <div class="max-w-7xl mx-auto px-4">
    <h2 class="text-5xl md:text-7xl font-black heading-font text-center text-white brutal-text mb-16">
      {{ section.settings.title }}
    </h2>

    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-10">
      {% assign routines = shop.metaobjects.routine.values %}
      {% for r in routines %}
        <div class="relative bg-gradient-to-b from-gray-800/80 to-gray-900/80 rounded-2xl p-6 flex flex-col items-center text-center shadow-2xl hover:-translate-y-1 transition">
          <span class="absolute top-4 right-4 px-4 py-1 rounded-full text-xs font-black tracking-wide {{ r.level | downcase }}-badge">{{ r.level }}</span>

          {% if r.hero_image != blank %}
            <img src="{{ r.hero_image | image_url: width: 300 }}" alt="{{ r.title }}" class="w-32 h-32 object-contain mx-auto mb-4">
          {% endif %}

          <h3 class="text-xl font-black heading-font text-white mb-3">{{ r.title }}</h3>
          <p class="text-gray-300 text-sm mb-6">{{ r.description }}</p>

          <div class="flex justify-center gap-2 mb-4">
            {% for p in r.products limit:4 %}
              <img src="{{ p.featured_image | image_url: width: 60 }}" class="w-10 h-10 object-contain rounded bg-white/10" alt="{{ p.title }}">
            {% endfor %}
          </div>

          <span class="text-2xl font-black bg-gradient-to-r from-white to-purple-200 bg-clip-text text-transparent mb-4">
            {{ r.price_override | default: r.products | map: 'price' | sum | money }}
          </span>

          <a href="/pages/routine?slug={{ r.slug }}" class="px-6 py-3 bg-white text-black rounded-btn font-black heading-font text-sm hover:bg-gray-200">DETAILS</a>
        </div>
      {% endfor %}
    </div>
  </div>
</section>